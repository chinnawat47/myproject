{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<div class="min-h-full bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-[#05339C] mb-2">แก้ไขข้อมูลโปรไฟล์</h1>
      <p class="text-gray-600">อัพเดตข้อมูลส่วนตัวของคุณ</p>
    </div>

    <!-- Form Container -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
      <div class="px-6 py-8 sm:px-8">
        <form method="post" novalidate>
          {% csrf_token %}
          
          <div class="space-y-6">
            <!-- ชื่อจริง -->
            <div class="form-group">
              <label for="first_name" class="block text-sm font-semibold text-gray-700 mb-2">
                ชื่อจริง
              </label>
              <input 
                type="text" 
                id="first_name"
                name="first_name" 
                value="{{ user.first_name }}"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              />
            </div>

            <!-- นามสกุล -->
            <div class="form-group">
              <label for="last_name" class="block text-sm font-semibold text-gray-700 mb-2">
                นามสกุล
              </label>
              <input 
                type="text" 
                id="last_name"
                name="last_name" 
                value="{{ user.last_name }}"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              />
            </div>

            <!-- คำนำหน้า -->
            <div class="form-group">
              <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">
                คำนำหน้า
              </label>
              <input 
                type="text" 
                id="title"
                name="title" 
                value="{{ user.title }}"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              />
            </div>

            <!-- คณะ -->
            <div class="form-group">
              <label for="faculty" class="block text-sm font-semibold text-gray-700 mb-2">
                คณะ
              </label>
              <input 
                type="text" 
                id="faculty"
                name="faculty" 
                value="{{ user.faculty }}"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              />
            </div>

            <!-- สาขา -->
            <div class="form-group">
              <label for="department" class="block text-sm font-semibold text-gray-700 mb-2">
                สาขา
              </label>
              <input 
                type="text" 
                id="department"
                name="department" 
                value="{{ user.department }}"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              />
            </div>

            <!-- ชั้นปี -->
            <div class="form-group">
              <label for="year" class="block text-sm font-semibold text-gray-700 mb-2">
                ชั้นปี
              </label>
              <select 
                id="year"
                name="year"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#41A67E] focus:ring-opacity-20 transition-all duration-200"
              >
                <option value="">-- เลือกชั้นปี --</option>
                <option value="1" {% if user.year == 1 %}selected{% endif %}>ชั้นปี 1</option>
                <option value="2" {% if user.year == 2 %}selected{% endif %}>ชั้นปี 2</option>
                <option value="3" {% if user.year == 3 %}selected{% endif %}>ชั้นปี 3</option>
                <option value="4" {% if user.year == 4 %}selected{% endif %}>ชั้นปี 4</option>
                <option value="5" {% if user.year == 5 %}selected{% endif %}>ชั้นปี 5</option>
              </select>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="mt-8 flex gap-4 sm:gap-6">
            <button type="submit" 
                    class="flex-1 bg-[#41A67E] hover:bg-[#369268] text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2"
                    aria-label="บันทึกการเปลี่ยนแปลง">
              <span class="flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                บันทึก
              </span>
            </button>
            <a href="{% url 'volunteer_app:profile' %}" 
               class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center justify-center"
               aria-label="ยกเลิก">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
              ยกเลิก
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
