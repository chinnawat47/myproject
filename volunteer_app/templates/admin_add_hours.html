{% extends "base.html" %}
{% block title %}เพิ่มชั่วโมงจิตอาสา{% endblock %}
{% block content %}

<style>
.glass {
  backdrop-filter: blur(14px);
  background: rgba(255, 255, 255, 0.75);
}
</style>

<div class="min-h-screen bg-gradient-to-br from-[#05339C] via-[#1055C9] to-[#41A67E] py-12 px-4 md:px-10 lg:px-20">
  <div class="max-w-3xl mx-auto">
    <!-- Header -->
    <div class="text-center text-white mb-8">
      <h1 class="text-4xl font-extrabold tracking-tight drop-shadow-xl">เพิ่มชั่วโมงจิตอาสา</h1>
      <p class="text-lg opacity-90 mt-3">เพิ่มชั่วโมงจิตอาสาให้ผู้ใช้</p>
    </div>

    <!-- Form Card -->
    <div class="glass rounded-3xl p-8 shadow-2xl">
      <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <!-- User Selection -->
        <div>
          <label for="user_id" class="block text-sm font-semibold text-gray-700 mb-2">
            เลือกผู้ใช้ <span class="text-red-500">*</span>
          </label>
          <select 
            id="user_id"
            name="user_id" 
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1055C9] transition-all"
          >
            <option value="">-- เลือกผู้ใช้ --</option>
            {% for user in users %}
            <option value="{{ user.pk }}">
              {{ user.get_full_name|default:user.username }} ({{ user.username }})
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- Activity Selection -->
        <div>
          <label for="activity_id" class="block text-sm font-semibold text-gray-700 mb-2">
            เลือกกิจกรรม <span class="text-red-500">*</span>
          </label>
          <select 
            id="activity_id"
            name="activity_id" 
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1055C9] transition-all"
          >
            <option value="">-- เลือกกิจกรรม --</option>
            {% for activity in activities %}
            <option value="{{ activity.pk }}">
              {{ activity.title }} - {{ activity.hours_reward }} ชั่วโมง ({{ activity.datetime|date:"d/m/Y" }})
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- Info Box -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <p class="text-sm text-blue-800">
            <strong>หมายเหตุ:</strong> การเพิ่มชั่วโมงจิตอาสาจะสร้าง QR scan record ให้ผู้ใช้โดยอัตโนมัติ 
            และจะอัปเดตสถานะการสมัครเป็น "attended" หากผู้ใช้ได้สมัครกิจกรรมนี้แล้ว
          </p>
        </div>

        <!-- Buttons -->
        <div class="flex gap-4 pt-4">
          <a href="{% url 'volunteer_app:admin_dashboard' %}" 
             class="flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-xl transition-colors text-center">
            ยกเลิก
          </a>
          <button type="submit" 
                  class="flex-1 px-6 py-3 bg-[#41A67E] hover:bg-[#369968] text-white font-semibold rounded-xl transition-colors">
            <i data-lucide="plus" class="w-5 h-5 inline mr-2"></i>
            เพิ่มชั่วโมงจิตอาสา
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Load Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  lucide.createIcons();
</script>

{% endblock %}

